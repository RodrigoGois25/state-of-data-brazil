<!DOCTYPE html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Recomendador de Cargos</title>
		<style>
			body {
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial,
					sans-serif;
				background-color: #f0f2f5;
				display: flex;
				justify-content: center;
				align-items: center;
				height: 100vh;
				margin: 0;
			}
			.container {
				background-color: white;
				padding: 40px;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
				width: 100%;
				max-width: 500px;
				text-align: center;
			}
			h1 {
				color: #1c1e21;
				margin-bottom: 24px;
			}
			.form-group {
				margin-bottom: 20px;
				text-align: left;
			}
			label {
				display: block;
				margin-bottom: 8px;
				color: #606770;
				font-weight: bold;
			}
			input,
			select,
			button {
				width: 100%;
				padding: 12px;
				border-radius: 6px;
				border: 1px solid #dddfe2;
				font-size: 16px;
				box-sizing: border-box;
			}
			button {
				background-color: #1877f2;
				color: white;
				font-weight: bold;
				border: none;
				cursor: pointer;
				margin-top: 10px;
			}
			button:hover {
				background-color: #166fe5;
			}
			button:disabled {
				background-color: #a0bdf5;
				cursor: not-allowed;
			}
			#result-message {
				margin-top: 24px;
				font-size: 18px;
				font-weight: bold;
				color: #1c1e21; /* Cor padrão */
			}
			.success {
				color: #28a745; /* Verde para sucesso */
			}
			.error {
				color: #dc3545; /* Vermelho para erro */
			}
		</style>
	</head>
	<body>
		<div class="container">
			<h1>Recomendador de Cargos em Dados</h1>
			<form id="recommendation-form">
				<div class="form-group">
					<label for="idade">Qual sua idade? (Apenas números inteiros)</label>
					<input type="number" id="idade" name="idade" required min="16" step="1" />
				</div>
				<div class="form-group">
					<label for="genero">Qual seu gênero?</label>
					<select id="genero" name="genero" required>
						<option value="masculino">Masculino</option>
						<option value="feminino">Feminino</option>
						<option value="prefiro nao informar">Prefiro Não Informar</option>
					</select>
				</div>
				<div class="form-group">
					<label for="etnia">Qual sua etnia?</label>
					<select id="etnia" name="etnia" required>
						<option value="amarela">Amarela</option>
						<option value="branca">Branca</option>
						<option value="indigena">Indígena</option>
						<option value="parda">Parda</option>
						<option value="preta">Preta</option>
						<option value="outra">Outra</option>
						<option value="prefiro nao informar">Prefiro Não Informar</option>
					</select>
				</div>
				<div class="form-group">
					<label for="estado_moradia">Qual seu estado de moradia?</label>
					<select id="estado_moradia" name="estado_moradia" required>
						<option value="alagoas (al)">Alagoas (AL)</option>
						<option value="amazonas (am)">Amazonas (AM)</option>
						<option value="bahia (ba)">Bahia (BA)</option>
						<option value="ceara (ce)">Ceará (CE)</option>
						<option value="distrito federal (df)">Distrito Federal (DF)</option>
						<option value="espirito santo (es)">Espírito Santo (ES)</option>
						<option value="goias (go)">Goiás (GO)</option>
						<option value="maranhao (ma)">Maranhão (MA)</option>
						<option value="mato grosso (mt)">Mato Grosso (MT)</option>
						<option value="mato grosso do sul (ms)">Mato Grosso do Sul (MS)</option>
						<option value="minas gerais (mg)">Minas Gerais (MG)</option>
						<option value="para (pa)">Pará (PA)</option>
						<option value="paraiba (pb)">Paraíba (PB)</option>
						<option value="parana (pr)">Paraná (PR)</option>
						<option value="pernambuco (pe)">Pernambuco (PE)</option>
						<option value="piaui (pi)">Piauí (PI)</option>
						<option value="rio de janeiro (rj)">Rio de Janeiro (RJ)</option>
						<option value="rio grande do norte (rn)">Rio Grande do Norte (RN)</option>
						<option value="rio grande do sul (rs)">Rio Grande do Sul (RS)</option>
						<option value="santa catarina (sc)">Santa Catarina (SC)</option>
						<option value="sao paulo (sp)">São Paulo (SP)</option>
						<option value="sergipe (se)">Sergipe (SE)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="nivel_ensino">Qual seu nível de ensino?</label>
					<select id="nivel_ensino" name="nivel_ensino" required>
						<option value="nao tenho graduacao formal">Não Possuo Graduação</option>
						<option value="estudante de graduacao">Estudante de Graduação</option>
						<option value="graduacao/bacharelado">Graduação/Bacharelado</option>
						<option value="pos-graduacao">Pós-Graduação</option>
						<option value="mestrado">Mestrado</option>
						<option value="doutorado ou phd">Doutorado ou PhD</option>
					</select>
				</div>
				<div class="form-group">
					<label for="formacao">Qual sua área de formação?</label>
					<select id="formacao" name="formacao" required>
						<option value="computacao / engenharia de software / sistemas de informacao/ ti">
							Computação e TI
						</option>
						<option value="outras engenharias">Engenharia</option>
						<option value="economia/ administracao / contabilidade / financas/ negocios">
							Economia e Finanças
						</option>
						<option value="estatistica/ matematica / matematica computacional/ ciencias atuariais">
							Estatística e Matemática
						</option>
						<option value="quimica / fisica">Química / Física</option>
						<option value="marketing / publicidade / comunicacao / jornalismo">
							Marketing / Jornalismo
						</option>
						<option value="ciencias biologicas/ farmacia/ medicina/ area da saude">
							Ciências Sociais / Humanas
						</option>
						<option value="ciencias sociais">Ciências Biológicas / Área da Saúde</option>
						<option value="outra opcao">Outras</option>
						<option value="nenhuma">Nenhuma</option>
					</select>
				</div>
				<div class="form-group">
					<label for="experiencia">Qual seu tempo de experiência em dados?</label>
					<select id="experiencia" name="experiencia" required>
						<option value="nao tenho experiencia na area de dados">Não Possuo Experiência</option>
						<option value="menos de 1 ano">Menos de 1 Ano</option>
						<option value="de 1 a 2 anos">1 a 2 Anos</option>
						<option value="de 3 a 4 anos">3 a 4 Anos</option>
						<option value="de 4 a 6 anos">4 a 6 Anos</option>
						<option value="de 7 a 10 anos">7 a 10 Anos</option>
						<option value="mais de 10 anos">Mais de 10 Anos</option>
					</select>
				</div>
				<div class="form-group">
					<label for="linguagens_preferidas">Qual sua linguagem preferida?</label>
					<select id="linguagens_preferidas" name="linguagens_preferidas" required>
						<option value="python">Python</option>
						<option value="r">R</option>
						<option value="sql">SQL</option>
						<option value="scala">Scala</option>
						<option value="c/c++/c#">C/C++/C#</option>
						<option value="julia">Julia</option>
						<option value="outro">Outro</option>
						<option value="nenhuma">Nenhuma</option>
					</select>
				</div>
				<div class="form-group">
					<label for="cloud_preferida">Qual sua cloud preferida?</label>
					<select id="cloud_preferida" name="cloud_preferida" required>
						<option value="amazon web services (aws)">Amazon Web Services (AWS)</option>
						<option value="google cloud (gcp)">Google Cloud (GCP)</option>
						<option value="azure (microsoft)">Azure (Microsoft)</option>
						<option value="outra cloud">Outra Cloud</option>
						<option value="nao sei opinar">Não Sei Opinar</option>
					</select>
				</div>
				<button type="submit">Obter Recomendação</button>
			</form>
			<div id="result-message"></div>
		</div>

		<script>
			const form = document.getElementById('recommendation-form')
			const submitButton = form.querySelector('button')
			const resultMessage = document.getElementById('result-message')
			const webhookUrl = 'http://localhost:5678/webhook/10418a36-6956-452f-a0e6-f1c86f644133'

			form.addEventListener('submit', function (event) {
				event.preventDefault()
				const idadeInput = document.getElementById('idade')
				const idade = idadeInput.value

				if (!idade || idade < 16 || !Number.isInteger(Number(idade))) {
					resultMessage.className = 'error'
					resultMessage.textContent =
						'Por favor, insira uma idade válida (número inteiro, maior que 15).'
					return
				}

				submitButton.disabled = true
				resultMessage.className = ''
				resultMessage.textContent = 'Processando sua recomendação...'

				const experiencia = document.getElementById('experiencia').value
				const nivel_ensino = document.getElementById('nivel_ensino').value
				const formacao = document.getElementById('formacao').value
				const genero = document.getElementById('genero').value
				const etnia = document.getElementById('etnia').value
				const estado_moradia = document.getElementById('estado_moradia').value
				const linguagens_preferidas = document.getElementById('linguagens_preferidas').value
				const cloud_preferida = document.getElementById('cloud_preferida').value

				const dataPayload = {
					idade: parseInt(idade),
					genero: genero,
					etnia: etnia,
					estado_moradia: estado_moradia,
					nivel_ensino: nivel_ensino,
					formacao: formacao,
					tempo_experiencia_dados: experiencia,
					linguagens_preferidas: linguagens_preferidas,
					cloud_preferida: cloud_preferida,
				}

				fetch(webhookUrl, {
					method: 'POST',
					headers: {
						'Content-Type': 'text/plain',
					},
					body: JSON.stringify(dataPayload),
				})
					.then((response) => response.json())
					.then((data) => {
						resultMessage.className = 'success'
						resultMessage.textContent = data.recomendacao.mensagem
						submitButton.disabled = false
					})
					.catch((error) => {
						console.error('Erro:', error)
						resultMessage.className = 'error'
						resultMessage.textContent =
							'Ocorreu um erro. Verifique se seus serviços locais (API Flask e n8n Docker) estão ativos.'
						submitButton.disabled = false
					})
			})
		</script>
	</body>
</html>
